#!/usr/bin/env ruby

$:.unshift File.join(File.dirname(__FILE__), *%w{ .. lib })

require 'burst'
require 'rubygems'
require 'json'
require 'trollop'

specs = Gem::Specification::load('burst.gemspec')
config = {}
customs = {}

if File.exist?(ENV['HOME'] + '/.burstrc')
  config = JSON.parse(File.read(ENV['HOME'] + '/.burstrc'))
end

customs = config['customs'] if config.has_key?('customs')

opts = Trollop::options do
  version "Burst " + specs.version.to_s
  opt :title, "Post title", :type => :string
end

Burst.go(opts, customs)
